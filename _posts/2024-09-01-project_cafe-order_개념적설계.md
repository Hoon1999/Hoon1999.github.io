---
title: "[DB] 개념적 설계"
date: 2024-09-01 07:21:00 +09:00
categories: [프로젝트, 카페오더]
tags:
  [
    프로젝트 회고,
    JavaFX,
    Cafe Order
  ]
use_math: true
---

## 요구사항
카페오더 프로젝트의 요구사항은 다음과 같다.<br>
1. 고객은 전화번호로 회원 인증을 할 수 있다.
2. 고객은 상품을 장바구니에 담을 수 있다.
3. 고객은 상품을 구매할 수 있다.
4. 고객은 포인트를 적립할 수 있다.
5. 회원정보는 전화번호, 포인트, 주문기록이 있다.
6. 회원은 전화번호로 식별된다.
7. 상품은 상품명, 가격, 재고, 품절여부, 옵션을 선택할 수 있다.
8. 옵션에는 옵션명, 재고수량, 옵션 유형, 품절여부가 있다.
9. 장바구니는 상품정보, 상품수량, 옵션, 옵션 수량을 가진 상품들의 목록을 가진다.
10. 주문서는 하면 키오스크번호, 주문번호, 상품목록, 상품수량, 결제금액, 결제시간을 가진다.
11. 관리자는 상품의 재고를 변경할 수 있다.
12. 관리자는 상품을 품절 처리할 수 있다.(재고의 수량과 별개로 품절처리 하고싶은 경우.)
13. 관리자는 고객이 주문한 상품을 볼 수 있다.
14. 관리자는 고객이 주문한 상품을 조리중, 주문취소, 주문완료 처리를 할 수 있다.
15. 관리자는 매출을 표 형태로 확인할 수 있다.
16. 관리자는 매출을 그래프 형태로 확인할 수 있다.

## 개념적 설계
### 개체와 속성 추출하기<br>
#### 명사 추출
<br>
업무와 관련 있는 명사 <br>
고객, 전화번호, 회원, 상품, 장바구니, 포인트, 주문기록 <br>
상품, 가격, 재고, 품절여부, 옵션 <br>
옵션, 옵션명, 재고수량, 옵션 유형, 품절여부,<br>
장바구니, 상품정보, 상품수량, 옵션, 옵션 수량,<br>
주문서, 키오스크번호, 주문번호, 상품목록, 상품수량, 결제금액, 결제시간,<br>
조리중, 주문취소, 주문완료, 매출<br>
<br>
업무와 관련이 적은 일반적이고 광범위한 의미의 명사는 제외한다. <br>
의미가 같은 명사가 여러개일 경우 대표명사 하나를 선택한다.<br>
<br>

#### 명사를 개체와 속성으로 구분하기

|개체|속성|
|---|---|
|고객||
|회원|전화번호, 포인트, 주문 기록|
|상품|가격, 재고, 품절여부, 옵션|
|옵션|옵션명, 재고수량, 옵션유형, 품절여부|
|장바구니|상품정보, 상품수량, 옵션, 옵션수량|
|주문서|키오스크번호, 주문번호, 상품목록, 상품수량, 결제금액, 결제시간, 주문상태(조리중, 주문취소, 주문완료)|
|매출||

작성하고 보니 고객과 매출 개체는 필요 없을 것 같고, 상품 목록과 상품 수량은 새로운 개체의 속성으로 넣어야할것 같다.<br>

|개체|속성|
|---|---|
|회원|전화번호, 포인트, ~~주문 기록~~|
|상품|상품명, 가격, 재고, 품절여부, ~~옵션~~|
|옵션|옵션명, 재고수량, 옵션유형, 품절여부|
|~~장바구니~~|~~상품정보, 상품수량, 옵션, 옵션수량~~|
|주문 목록|주문번호, ~~주문 상세~~, 총결제금액, 결제시간, 주문상태(조리중, 주문취소, 주문완료)|
|주문 상세|항목번호, 상품명, 옵션, 옵션 수량, 상품 수량, 가격|

상품 개체에 상품명도 넣고, 주문 상세를 작성했다.<br>
주문 상세를 작성하다보니 장바구니와 많이 겹치는걸 알게 되었고 장바구니는 DB에 저장할 일이 없으므로 삭제하였다.<br>
주문 상세에 항목번호를 집어넣었는데 이 속성은 옵션만 다른 같은 상품을 구분하기 위해서 넣은 속성이다.<br>
<br>
음.. 뭔가 문제가 많은데 일단 설계 순서를 지키면서 문제가 되는것을 제거해야겠다.<br>
계속 문제가 없는 테이블을 완성하고 다음 단계로 넘어가려고 하니 단계를 넘어갈 수가 없다.<br>
각 단계에서 잘못된 속성과 개체들을 제거하며 넘어간다.<br>
<br>

#### 관계 추출(동사 추출)
개체간의 관계를 표현하는 동사를 찾는다.<br>

> 고객은 전화번호로 회원인증을 **할 수 있다**.

고객이라는 개체가 없고, 전화번호는 개체가 아니라 속성이므로 **할 수 있다** 는 개체간의 관계를 표현하는 동사가 아니다.<br>


> 고객은 상품을 구매할 수 있다.

여기서 고객은 회원,비회원 모두 일컫는 말이었는데 비회원을 전화번호 000-0000-0000 인 회원으로 구현할 것이니 고객 대신 회원이라고 본다.<br>
요구사항에는 구매라고 작성하였으나 잘 생각해보면 주문이 더 올바른 표현이다.<br>
고쳐보면 다음과 같다.<br>

> 회원은 상품을 **주문할 수 있다**.

![사진1](https://github.com/Hoon1999/hoon1999.github.io/blob/main/assets/img/2024-09-01/project_cafe_order/1.png?raw=true)<br>

> 고객은 포인트를 적립할 수 있다.
> 회원정보는 전화번호, 포인트, 주문기록이 있다. 
> 회원은 전화번호로 식별된다.

위 요구사항들에는 개체 - 개체 관계를 표현하는 동사가 없다.<br>
정확히는 개체가 둘 이상 없다.<br>

> 상품은 상품명, 가격, 재고, 품절여부, 옵션을 **선택할 수 있다**.
> 옵션에는 옵션명, 재고수량, 옵션 유형, 품절여부가 있다.

![사진2](https://github.com/Hoon1999/hoon1999.github.io/blob/main/assets/img/2024-09-01/project_cafe_order/2.png?raw=true)<br>

처음엔 옵션을 상품의 속성으로 작성했는데 바로 다음 문장에 옵션이 개체로 되어있다. <br>

> 장바구니는 상품정보, 상품수량, 옵션, 옵션 수량을 가진 상품들의 목록을 가진다.
> 주문서는 하면 키오스크번호, 주문번호, 상품목록, 상품수량, 결제금액, 결제시간을 가진다.
> 관리자는 상품의 재고를 변경할 수 있다.
> 관리자는 상품을 품절 처리할 수 있다.(재고의 수량과 별개로 품절처리 하고싶은 경우.)
> 관리자는 고객이 주문한 상품을 볼 수 있다.
> 관리자는 고객이 주문한 상품을 조리중, 주문취소, 주문완료 처리를 할 수 있다.
> 관리자는 매출을 표 형태로 확인할 수 있다.
> 관리자는 매출을 그래프 형태로 확인할 수 있다.

나머지 요구사항에는 개체가 없다.<br>

![사진3](https://github.com/Hoon1999/hoon1999.github.io/blob/main/assets/img/2024-09-01/project_cafe_order/3.png?raw=true)<br>
ERD 를 한번에 그려보면 위와 같이 나온다. <br>

![사진4](https://github.com/Hoon1999/hoon1999.github.io/blob/main/assets/img/2024-09-01/project_cafe_order/4.png?raw=true)<br>
테이블을 작성하면서 잘못된 부분들을 수정하였다. 최종 ERD 는 위와 같다.<br>

**References** <br>
[데이터베이스 설계 1 - 요구 사항 분석 / 개념적 설계](https://wonsjung.tistory.com/402) <br>